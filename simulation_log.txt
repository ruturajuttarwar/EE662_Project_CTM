================================================================================
SIMULATION LOG - V1
================================================================================
Starting simulation...
Duration: 5000s, Nodes: 100
Log file: simulation_log.txt
================================================================================
Node #82 [  46.29110] [JOIN] Selecting ROOT 81 (hop=0) - no greens available
Node #71 [  46.29110] [JOIN] Selecting ROOT 81 (hop=0) - no greens available
Node #72 [  46.29113] [JOIN] Selecting ROOT 81 (hop=0) - no greens available
Node #80 [  46.29113] [JOIN] Selecting ROOT 81 (hop=0) - no greens available
Node #70 [  46.29114] [JOIN] Selecting ROOT 81 (hop=0) - no greens available
Node #72 [  46.29135] [HEARTBEAT] Received PROBE, sending HEARTBEAT response
Node #82 [  46.29139] [HEARTBEAT] Received PROBE, sending HEARTBEAT response
Node #82 [  46.29140] [HEARTBEAT] Received PROBE, sending HEARTBEAT response
Node #80 [  46.29144] [HEARTBEAT] Received PROBE, sending HEARTBEAT response
Node #92 [  76.29130] [JOIN] Selecting REGISTERED 82 (dist=99.9m) - direct to green
Node #73 [  76.29130] [JOIN] Selecting REGISTERED 72 (dist=81.2m) - direct to green
Node #72 [  76.29135] [GREEN] Requesting promotion for yellow 73
Node #90 [  76.29137] [JOIN] Selecting REGISTERED 80 (dist=81.2m) - direct to green
Node #82 [  76.29139] [GREEN] Requesting promotion for yellow 92
Node #82 [  76.29140] [GREEN] Requesting promotion for yellow 73
Node #81 [  76.29143] [CH] Approving: yellow 73 → CH, green 72
Node #80 [  76.29144] [GREEN] Requesting promotion for yellow 90
Node #81 [  76.29144] [CH] Approving: yellow 92 → CH, green 82
Node #81 [  76.29144] [CH] Approving: yellow 73 → CH, green 82
Node #82 [  76.29149] [ROUTER] Received router promotion approval for yellow 92
Node #82 [  76.29149] [ROUTER] Promoted to ROUTER, bridging CHs [81,254] and 92
Node #72 [  76.29151] [ROUTER] Received router promotion approval for yellow 73
Node #72 [  76.29151] [ROUTER] Promoted to ROUTER, bridging CHs [81,254] and 73
Node #81 [  76.29152] [CH] Approving: yellow 90 → CH, green 80
Node #73 [  76.29157] [ROUTER] Received BECOME_CH from router 72, promoting to CH
Node #73 [  76.29157] [ROUTER] Became CH (promoted by router 72)
Node #92 [  76.29159] [ROUTER] Received BECOME_CH from router 82, promoting to CH
Node #92 [  76.29159] [ROUTER] Became CH (promoted by router 82)
Node #80 [  76.29160] [ROUTER] Received router promotion approval for yellow 90
Node #80 [  76.29160] [ROUTER] Promoted to ROUTER, bridging CHs [81,254] and 90
Node #90 [  76.29167] [ROUTER] Received BECOME_CH from router 80, promoting to CH
Node #90 [  76.29167] [ROUTER] Became CH (promoted by router 80)
Node #63 [ 106.29165] [JOIN] Selecting CLUSTER_HEAD 73 (hop=2) - no greens available
Exception in thread Thread-6 (run_and_close):
Traceback (most recent call last):
  File "/Users/ruturajuttarwar/Desktop/USA docs/SDSU/SDSU courses/Wireless Sensor/EE662Fall2025 3/wsnlab/source/wsnlab.py", line 91, in _wrapper
    func(*args, **kwargs)
    ~~~~^^^^^^^^^^^^^^^^^
  File "/Users/ruturajuttarwar/Desktop/USA docs/SDSU/SDSU courses/Wireless Sensor/EE662Fall2025 3/wsnlab/data_collection_tree_v3.py", line 1213, in on_timer_fired
    self.select_and_join()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ruturajuttarwar/Desktop/USA docs/SDSU/SDSU courses/Wireless Sensor/EE662Fall2025 3/wsnlab/data_collection_tree_v3.py", line 282, in select_and_join
    self.send_join_request(selected_addr)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/Users/ruturajuttarwar/Desktop/USA docs/SDSU/SDSU courses/Wireless Sensor/EE662Fall2025 3/wsnlab/data_collection_tree_v3.py", line 396, in send_join_request
    self.send({'dest': dest, 'type': 'JOIN_REQUEST', 'gui': self.id})
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ruturajuttarwar/Desktop/USA docs/SDSU/SDSU courses/Wireless Sensor/EE662Fall2025 3/wsnlab/source/wsnlab_vis.py", line 51, in send
    super().send(pck)
    ~~~~~~~~~~~~^^^^^
  File "/Users/ruturajuttarwar/Desktop/USA docs/SDSU/SDSU courses/Wireless Sensor/EE662Fall2025 3/wsnlab/source/wsnlab.py", line 227, in send
    if node.can_receive(pck):
       ~~~~~~~~~~~~~~~~^^^^^
  File "/Users/ruturajuttarwar/Desktop/USA docs/SDSU/SDSU courses/Wireless Sensor/EE662Fall2025 3/wsnlab/source/wsnlab.py", line 202, in can_receive
    if dest.is_equal(BROADCAST_ADDR):  # if destination address is broadcast address
       ^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'is_equal'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/threading.py", line 1043, in _bootstrap_inner
    self.run()
    ~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/threading.py", line 994, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ruturajuttarwar/Desktop/USA docs/SDSU/SDSU courses/Wireless Sensor/EE662Fall2025 3/wsnlab/source/wsnlab_vis.py", line 195, in run_and_close
    super(Simulator, self).run()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ruturajuttarwar/Desktop/USA docs/SDSU/SDSU courses/Wireless Sensor/EE662Fall2025 3/wsnlab/source/wsnlab.py", line 532, in run
    self.env.run(until=self.duration)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/simpy/core.py", line 246, in run
    self.step()
    ~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/simpy/rt.py", line 90, in step
    Environment.step(self)
    ~~~~~~~~~~~~~~~~^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/simpy/core.py", line 204, in step
    raise exc
AttributeError: 'NoneType' object has no attribute 'is_equal'
